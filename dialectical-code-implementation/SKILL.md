---
name: dialectical-code-implementation
description: 提供标准化的7步代码实现与问题解决流程，支持质变预警触发和深度辩证分析，适用于复杂代码重构、技术选型决策、架构设计优化等场景
---

# 辩证式代码实现与问题解决

## 任务目标
- 本 Skill 用于：在代码实现和问题解决过程中提供标准化、系统化的辩证分析框架
- 能力包含：
  - 7步标准化工作流程指导
  - 质变预警触发机制
  - 深度辩证分析能力
  - 扬弃路径决策支持
  - 风险预判与防范
- 触发条件：当用户需要实现新功能、重构现有代码、解决技术难题或进行架构决策时
- 输入要求：
  - 代码实现需求（功能描述、性能指标等）
  - 项目背景（业务场景、用户规模等）
  - 技术栈信息（编程语言、框架、依赖等）
  - 现有代码情况（代码结构、关键模块、历史问题等）
- 输出要求：
  - 每个步骤的执行指南
  - 决策依据说明
  - 风险提示清单
  - 代码实现方案
  - 问题说明与发展预判

## 前置准备
- 依赖说明：无外部依赖，所有功能由智能体通过自然语言处理完成
- 文件准备：无需前置文件

## 操作步骤

### 第一步：接收任务与初始调研

**输入**：用户的代码实现需求、项目背景、技术栈信息

**执行方式**：智能体进行信息收集和初步理解

**执行要点**：
1. 收集并整理项目背景信息：业务场景、目标用户、性能要求、约束条件
2. 明确技术栈现状：编程语言、框架版本、核心依赖、部署环境
3. 识别现有代码情况：代码结构、关键模块、技术债务、历史问题
4. 梳理需求细节：功能点、边界条件、预期效果、优先级

**输出**：任务理解报告，包含项目背景、技术栈现状、需求概述、初始问题清单

**决策点**：
- 是否需要补充更多信息？（缺少关键信息时向用户确认）
- 需求是否清晰明确？（模糊需求需进一步澄清）

---

### 第二步：初步构思与可行性分析

**输入**：第一步的任务理解报告

**执行方式**：智能体进行可行性评估和多方案构思

**执行要点**：
1. 技术可行性评估：
   - 评估现有技术栈能否满足需求
   - 识别技术难点和潜在风险
   - 判断是否需要引入新技术或重构现有模块
2. 时间可行性评估：
   - 估算各方案的实现时间
   - 评估对现有功能的影响范围
   - 识别关键路径和里程碑
3. 资源可行性评估：
   - 评估人力、算力、存储等资源需求
   - 识别资源瓶颈和优化空间
4. 构思多套方案：
   - 设计至少2-3种实现方案
   - 对比各方案的优劣势
   - 标注方案的激进程度（渐进式 vs 革命式）

**输出**：可行性分析报告，包含多方案对比、时间估算、资源需求、初步风险清单

**决策点**：
- 是否具备技术可行性？（不可行则提出替代方案）
- 时间和资源是否充足？（不足则建议分阶段实施）

---

### 第三步：评估"度"与风险预判

**输入**：第二步的可行性分析报告

**执行方式**：智能体进行量变-质变分析和风险预判

**执行要点**：
1. 评估方案的影响"度"：
   - 对现有代码架构的影响范围（局部调整 vs 架构重构）
   - 对业务流程的影响程度（无影响 vs 中断式影响）
   - 对性能的影响程度（可接受 vs 需要优化）
   - 对团队的认知负荷（学习成本低 vs 需要深度培训）
2. 识别潜在风险：
   - 技术风险：技术选型风险、兼容性风险、性能风险
   - 时间风险：延期风险、依赖风险、变更风险
   - 资源风险：算力不足、存储压力、网络带宽
   - 业务风险：功能缺失、体验下降、数据安全
3. 判断质变预警触发条件（见 [references/quality-warning-criteria.md](references/quality-warning-criteria.md)）：
   - 影响范围超过阈值（如核心模块重构）
   - 技术复杂度超出团队经验
   - 潜在风险等级达到高危
   - 方案涉及颠覆性技术或架构变更

**输出**：度评估报告，包含影响程度评级、风险清单、质变预警判断

**决策点**：
- 是否触发质变预警？（触发则进入第四步深度辩证分析）
- 风险是否可控？（不可控则需要调整方案或引入缓冲措施）

---

### 第四步：深度辩证分析（仅质变预警触发时执行）

**输入**：第三步的度评估报告和风险清单

**执行方式**：智能体按照深度辩证分析方法论（见 [references/dialectical-analysis-methodology.md](references/dialectical-analysis-methodology.md)）进行系统性分析

**执行要点**：
1. 识别问题现象：
   - 描述当前面临的具体问题
   - 问题的表现形式和触发条件
   - 问题的影响范围和严重程度
2. 挖掘根本原因：
   - 通过多维度分析（技术、流程、组织）追溯原因
   - 识别表层原因和深层原因
   - 区分直接原因和间接原因
3. 分析主要矛盾：
   - 识别当前阶段的主要矛盾（如性能 vs 可维护性、速度 vs 质量）
   - 分析矛盾的主要方面和次要方面
   - 判断矛盾的发展趋势
4. 探索矛盾转化路径：
   - 分析矛盾的转化条件
   - 寻找矛盾转化的关键节点
   - 评估转化路径的可行性

**输出**：深度辩证分析报告，包含问题现象描述、根本原因分析、主要矛盾识别、转化路径建议

**决策点**：
- 主要矛盾是否被准确识别？（需验证矛盾分析的正确性）
- 是否找到了可行的矛盾转化路径？（未找到则继续探索或寻求外部支持）

---

### 第五步：探索扬弃路径并决策

**输入**：第二步的可行性分析报告、第三步的度评估报告、第四步的深度辩证分析报告（如有）

**执行方式**：智能体基于分析结果进行扬弃决策（参考 [references/decision-making-template.md](references/decision-making-template.md)）

**执行要点**：
1. 对比各方案：
   - 列出所有可行方案（含改进后的方案）
   - 从多个维度对比：技术合理性、实现成本、风险等级、团队接受度
   - 标注各方案的"扬弃"内容（保留什么、抛弃什么、创新什么）
2. 评估扬弃路径：
   - 分析每个方案的保留部分（现有优势、成熟经验）
   - 分析每个方案的抛弃部分（技术债务、不合理设计）
   - 分析每个方案的创新部分（新技术、新架构、新方法）
3. 做出最终决策：
   - 选择最优方案（综合权衡技术、时间、资源、风险）
   - 明确决策依据（为什么选择此方案而非其他）
   - 制定实施策略（分阶段、分模块、分优先级）

**输出**：扬弃决策报告，包含方案对比表、最终方案、决策依据、实施策略

**决策点**：
- 是否达成决策共识？（内部有分歧则进一步论证）
- 方案是否可落地？（不可落地则调整方案或补充资源）

---

### 第六步：代码实现与单元测试

**输入**：第五步的扬弃决策报告和实施策略

**执行方式**：智能体提供代码实现指导和测试方案

**执行要点**：
1. 制定实现计划：
   - 细化任务拆解（模块级、函数级）
   - 定义实现顺序（依赖关系、优先级）
   - 设置检查点（代码审查、单元测试、集成测试）
2. 代码实现指导：
   - 提供关键模块的实现思路
   - 定义接口规范和数据结构
   - 标注技术难点和实现技巧
   - 强调代码质量要求（可读性、可维护性、可测试性）
3. 单元测试设计：
   - 定义测试用例（正常场景、边界场景、异常场景）
   - 设计测试数据（覆盖率、典型值、边界值）
   - 明确验收标准（功能正确性、性能指标、错误处理）
4. 风险防范措施：
   - 制定回滚方案（版本控制、数据备份）
   - 设置监控指标（错误率、响应时间、资源占用）
   - 预留调优空间（性能调优、参数配置）

**输出**：代码实现方案，包含实现计划、代码框架、测试方案、风险防范措施

**决策点**：
- 是否需要调整实现方案？（实现过程中发现新问题则迭代优化）
- 测试是否覆盖所有关键场景？（补充遗漏的测试用例）

---

### 第七步：交付代码并提供问题说明与发展预判

**输入**：第六步的代码实现方案和测试结果

**执行方式**：智能体生成交付文档和发展预判

**执行要点**：
1. 整理交付内容：
   - 代码清单（新增/修改的文件）
   - 配置说明（环境变量、配置文件）
   - 部署文档（部署步骤、注意事项）
2. 问题说明：
   - 已解决的问题清单及解决方案
   - 遗留问题及后续优化方向
   - 技术债务的偿还计划
3. 发展预判：
   - 预测方案的演进路径（近期、中期、长期）
   - 识别可能的新矛盾（如新功能需求、性能瓶颈、技术迭代）
   - 提前规划应对策略（技术储备、架构升级、团队培训）
4. 经验总结：
   - 提炼本次实践的关键经验
   - 总结方法论层面的启示
   - 形成可复用的实践模板

**输出**：交付报告，包含代码清单、部署说明、问题说明、发展预判、经验总结

**决策点**：
- 交付是否完整？（检查所有承诺内容是否交付）
- 预判是否合理？（基于风险等级设置监控和应对机制）

---

## 操作流程图

```
第一步：接收任务与初始调研
        ↓
第二步：初步构思与可行性分析
        ↓
第三步：评估"度"与风险预判
        ↓ [触发质变预警？]
    是 ↘           ↓ 否
第四步：深度辩证分析 ←┘
        ↓
第五步：探索扬弃路径并决策
        ↓
第六步：代码实现与单元测试
        ↓
第七步：交付代码并提供问题说明与发展预判
```

## 资源索引

### 参考文档
- 质变预警触发标准：见 [references/quality-warning-criteria.md](references/quality-warning-criteria.md)（何时读取：第三步判断是否触发质变预警时）
- 深度辩证分析方法论：见 [references/dialectical-analysis-methodology.md](references/dialectical-analysis-methodology.md)（何时读取：第四步执行深度辩证分析时）
- 风险评估框架：见 [references/risk-assessment-framework.md](references/risk-assessment-framework.md)（何时读取：第二步可行性分析和第三步风险预判时）
- 决策模板：见 [references/decision-making-template.md](references/decision-making-template.md)（何时读取：第五步扬弃路径决策时）

### 资产模板
- 流程检查清单：见 [assets/workflow-checklist.md](assets/workflow-checklist.md)（直接用于检查每步输出是否完整）

## 注意事项

1. **严格遵循流程顺序**：7步流程必须按顺序执行，每步的输出作为下一步的输入，形成完整的逻辑闭环

2. **质变预警触发条件**：
   - 核心架构重构
   - 技术栈颠覆性变更
   - 影响范围超过50%的代码模块
   - 潜在风险等级达到高危
   - 团队经验不足且复杂度超出阈值

3. **深度辩证分析要点**：
   - 透过现象看本质
   - 识别主要矛盾和次要矛盾
   - 分析矛盾的主要方面和次要方面
   - 寻找矛盾转化的条件和路径

4. **扬弃决策原则**：
   - 扬：保留现有优势、成熟经验、合理架构
   - 弃：抛弃技术债务、不合理设计、过时技术
   - 创：引入新技术、新架构、新方法（在保证可控的前提下）

5. **风险防范策略**：
   - 分阶段实施：降低单次变更风险
   - 设置回滚点：快速应对异常情况
   - 加强监控：实时跟踪关键指标
   - 预留调优空间：根据实际运行情况优化

6. **输出质量要求**：
   - 每步输出必须清晰、具体、可验证
   - 决策依据必须充分、逻辑严密
   - 风险提示必须全面、可操作
   - 发展预判必须基于数据、有据可依

7. **灵活性与严谨性平衡**：
   - 在遵循整体流程的前提下，允许根据具体场景调整细节
   - 对于简单场景可以适当简化流程（如跳过质变预警）
   - 对于复杂场景必须严格执行每个步骤

## 使用示例

### 示例1：微服务架构重构

**功能说明**：将单体应用重构为微服务架构

**执行方式**：混合（智能体主导流程指导 + 用户提供具体代码）

**关键参数**：
- 原有代码量：50万行
- 技术栈：Java Spring Boot
- 目标架构：Spring Cloud 微服务

**执行要点**：
1. 第三步触发质变预警（架构变更影响范围大）
2. 第四步深度辩证分析：主要矛盾是"灵活性 vs 复杂性"
3. 第五步决策：采用渐进式重构策略，先拆分非核心服务

**简述流程**：
- 第一步：收集业务背景、现有架构、性能瓶颈信息
- 第二步：评估微服务架构的技术可行性、时间成本、资源需求
- 第三步：触发质变预警（影响范围80%，风险等级高危）
- 第四步：分析主要矛盾——服务的独立性 vs 分布式复杂性
- 第五步：决策采用"先边缘后核心"的渐进式重构路径
- 第六步：分阶段实现服务拆分、网关搭建、数据迁移
- 第七步：交付微服务架构，预留服务治理和性能优化空间

### 示例2：性能优化项目

**功能说明**：优化系统响应时间，从平均500ms降低到100ms

**执行方式**：智能体主导

**关键参数**：
- 现有性能：平均响应500ms，峰值2000ms
- 优化目标：平均100ms，峰值300ms
- 技术栈：Node.js + Redis + MySQL

**执行要点**：
1. 第三步不触发质变预警（性能优化属于局部调整）
2. 第四步跳过深度辩证分析
3. 第五步直接决策：采用"缓存优化 + 数据库索引 + 代码重构"组合方案

**简述流程**：
- 第一步：收集性能瓶颈数据、用户访问模式、系统架构信息
- 第二步：评估各优化方案（缓存、索引、异步化、架构调整）的可行性
- 第三步：影响范围评估——影响范围中等，风险可控，不触发质变预警
- 第五步：决策采用多管齐下的组合优化方案
- 第六步：实现缓存策略、数据库索引优化、关键代码异步化
- 第七步：交付优化方案，性能提升80%，预留进一步优化空间
